<%- include('../../header') -%>
<main role="main" id="contenu">
    <div class="fr-container fr-mb-8w">
        <%- include('../../global_components/ariane', { items: [
                { label: 'Accueil', url: '/' },
                { label: 'Changement de mot de passe' },
            ],})
            -%>
            <div class="fr-grid-row fr-grid-row--center fr-grid-row--gutters">
                <div class="fr-col fr-col-lg-8">
                    <% if (activation) { %>
                        <h1>Activer mon compte en créant mon mot de passe</h1>
                    <% } else { %>
                        <h1>Modifier votre mot de passe</h1>
                    <% }%>
                    <div role="alert" class="fr-alert fr-alert--info">
                        <p class="fr-alert__title">Format du mot de passe</p>
                        <ul>
                            <li>Doit contenir au moins un chiffre [0-9]</li>
                            <li>Doit contenir au moins un caractère minuscule [a-z]</li>
                            <li>Doit contenir au moins un caractère majuscule [A-Z]</li>
                            <li>Doit contenir au moins un caractère spécial [*.!@#$%^&(){}[]:;<>,.?/~_+-=|\\]</li>
                            <li>Doit contenir au moins 8 caractères, mais pas plus de 32</li>
                        </ul>
                    </div>
                    <% if (typeof error != 'undefined' && error) { %>
                        <div role="alert" class="fr-alert fr-alert--warning">
                            <p class="fr-alert__title">Attention</p>
                            <% if (error === errorCodes.RESET_TOKEN_NOT_FOUND || error === errorCodes.USER_NOT_FOUND) { %>
                                <p>Ce lien n'est pas valide, vérifier que l'URL est bien celle envoyée par mail.</p>
                            <% } else if (error === errorCodes.RESET_TOKEN_EXPIRED) {%>
                                <p>Ce lien à expirer, allez sur <a href="/auth/forget-password" target="_blank" rel="noopener noreferrer">la page mots de passe oublier</a> pour recevoir un nouveau lien d'activation.</p>
                            <% } else if (error === errorCodes.PASSWORD_FORMAT_INVALID) {%>
                                <p>Le format du mot de passe ne corresponds pas aux exigences de sécurité</p>
                            <% } else { %>
                                <p>Une erreur est survenue lors de la création de votre compte.</p>
                            <% } %>
                        </div>
                    <% } %>
                    <form action="" method="POST" data-controller="auth--reset-password--resetPassword" data-turbo="false">
                        <fieldset class="fr-fieldset fr-my-4w">
                            <div class="fr-input-group">
                                <label class="fr-label" for="text-input-text">Mot de passe :</label>
                                <input class="fr-input" type="password" name="password" required="true" data-auth--reset-password--resetPassword-target="password" data-action="input->auth--reset-password--resetPassword#valueChange">
                            </div>
                            <div class="fr-input-group">
                                <input class="fr-input" type="hidden" name="token" required="true" value="<%-token%>">
                            </div>
                        </fieldset>
                        <div class="fr-input-group fr-my-4w">
                            <button type="submit" class="fr-btn" title="Réserver ma conférence" data-auth--reset-password--resetPassword-target="submit" disabled="true">Valider</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</main>
<%- include('../../footer') -%>